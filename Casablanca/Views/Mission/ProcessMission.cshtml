@using Casablanca.Models;
@using Casablanca.Models.Database;

@{
	ViewBag.Title = "Modifier une mission";


	Dal dal = new Dal();

}

@model Mission

<!-- Include the plugin's CSS and JS: -->
<script type="text/javascript" src="~/Scripts/bootstrap-multiselect.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/css/bootstrap-multiselect.css" type="text/css" />


<div align="center">
	<h2>Edition d'une mission</h2>

	@using (Html.BeginForm())
	{



		<div style="padding:10px">
			<div> @Html.LabelFor(m => m.Name) </div>
			<div> @Html.TextBoxFor(m => m.Name) </div>
		</div>

		<br>


		<div style="padding:10px">
			<div> @Html.LabelFor(m => m.Status) </div>
			<div> TODO : drop down list status </div>
		</div>


		<br>

		<div style="padding:10px">
			<div>@Html.LabelFor(m => m.StartDate)</div>
			<div>
				@Html.TextBoxFor(model => Model.StartDate,
								 new { @type = "date", @class = "form-control datepicker", @Value = Model.StartDate.ToString("dd-MM-yyyy") })
			</div>
		</div>

		<div style="padding:10px">
			TODO: Make this field optional!
			<div> @Html.LabelFor(m => m.EndDate) </div>
			<div>
				@Html.TextBoxFor(model => Model.EndDate,
								 new { @type = "date", @class = "form-control datepicker", @Value = Model.EndDate.ToString("dd-MM-yyyy") })
			</div>
		</div>

		<br />

		<!-- pick des collabo TODO -->
		<div>
			<text>Choisir les collaborateurs de la mission</text>



			<fieldset>


				<div class="editor-field">

					@Html.ListBox("Collabos", ViewBag.Collablist as MultiSelectList,
					new { style = "width:500px; height:200px" }

					)

				</div>

			</fieldset>



		</div>

		@*searchable drop down list. On click, add the selected coll to the list

			Try this : https://stackoverflow.com/a/33154580

			or this ? https://stackoverflow.com/questions/18144124/how-to-search-a-list-of-products-using-controller-by-name-or-id*@

		<div style="padding:10px">
			<input type="submit" value="Sauvegarder" />
		</div>

		@Html.ValidationSummary("");
	}
</div>

@section Scripts{
	@*<script>
		$(document).ready(function () {
			$('#multiselect').multiselect({
				buttonWidth: '160px',
				includeSelectAllOption: true,
				nonSelectedText: 'Select an Option'
			});

		});

		function getSelectedValues() {
			var selectedVal = $("#multiselect").val();
			for (var i = 0; i < selectedVal.length; i++) {
				var
					innerFunc = function innerFunc(i) {
						setTimeout(function () {
							location.href = selectedVal[i];
						}, i * 2000);
					}; if (window.CP.shouldStopExecution(0)) break;
				innerFunc(i);
			} window.CP.exitedLoop(0);
		}


	</script>*@
}

